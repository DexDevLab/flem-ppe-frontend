<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="https://github.com/DexDevLab"><meta name="author" content="https://github.com/rodsl"><meta name="description" content="Aplicação FrontEnd para o Portal Projeto Primeiro Emprego, da FLEM"><script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous"><title>Source: pages/[entity]/monitoramento/index.jsx</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body class="dark" data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">FLEM PPE Frontend - Documentação</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="MpaAFMAiYRORNJnab3u9O"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-acoes.html">acoes</a></div><div class="sidebar-section-children"><a href="module-AnimatePresenceWrapper.html">AnimatePresenceWrapper</a></div><div class="sidebar-section-children"><a href="module-api.html">api</a></div><div class="sidebar-section-children"><a href="module-auth.html">auth</a></div><div class="sidebar-section-children"><a href="module-beneficiarios.html">beneficiarios</a></div><div class="sidebar-section-children"><a href="module-Breadcrumb.html">Breadcrumb</a></div><div class="sidebar-section-children"><a href="module-Buttons.html">Buttons</a></div><div class="sidebar-section-children"><a href="module-Cards.html">Cards</a></div><div class="sidebar-section-children"><a href="module-Charts.html">Charts</a></div><div class="sidebar-section-children"><a href="module-colaboradores-cr.html">colaboradores-cr</a></div><div class="sidebar-section-children"><a href="module-comunicados.html">comunicados</a></div><div class="sidebar-section-children"><a href="module-dashboard.html">dashboard</a></div><div class="sidebar-section-children"><a href="module-demandantes.html">demandantes</a></div><div class="sidebar-section-children"><a href="module-Dropzone.html">Dropzone</a></div><div class="sidebar-section-children"><a href="module-EmailEditor.html">EmailEditor</a></div><div class="sidebar-section-children"><a href="module-envio-oficios.html">envio-oficios</a></div><div class="sidebar-section-children"><a href="module-escritorios-regionais.html">escritorios-regionais</a></div><div class="sidebar-section-children"><a href="module-eventos.html">eventos</a></div><div class="sidebar-section-children"><a href="module-Form.html">Form</a></div><div class="sidebar-section-children"><a href="module-geral.html">geral</a></div><div class="sidebar-section-children"><a href="module-Icons.html">Icons</a></div><div class="sidebar-section-children"><a href="module-importar.html">importar</a></div><div class="sidebar-section-children"><a href="module-Inputs.html">Inputs</a></div><div class="sidebar-section-children"><a href="module-Inputs.html">Inputs</a></div><div class="sidebar-section-children"><a href="module-Layout.html">Layout</a></div><div class="sidebar-section-children"><a href="module-LDAPService.html">LDAPService</a></div><div class="sidebar-section-children"><a href="module-Logo.html">Logo</a></div><div class="sidebar-section-children"><a href="module-materiais.html">materiais</a></div><div class="sidebar-section-children"><a href="module-Menus.html">Menus</a></div><div class="sidebar-section-children"><a href="module-monitoramento.html">monitoramento</a></div><div class="sidebar-section-children"><a href="module-monitoramento.html">monitoramento</a></div><div class="sidebar-section-children"><a href="module-monitores.html">monitores</a></div><div class="sidebar-section-children"><a href="module-Navbar.html">Navbar</a></div><div class="sidebar-section-children"><a href="module-Overlay.html">Overlay</a></div><div class="sidebar-section-children"><a href="module-por-beneficiario.html">por-beneficiario</a></div><div class="sidebar-section-children"><a href="module-relatorios-monitoramentos.html">relatorios-monitoramentos</a></div><div class="sidebar-section-children"><a href="module-Sidebar.html">Sidebar</a></div><div class="sidebar-section-children"><a href="module-sintese.html">sintese</a></div><div class="sidebar-section-children"><a href="module-situacoes-vaga.html">situacoes-vaga</a></div><div class="sidebar-section-children"><a href="module-Table.html">Table</a></div><div class="sidebar-section-children"><a href="module-TagInput.html">TagInput</a></div><div class="sidebar-section-children"><a href="module-templates-oficios.html">templates-oficios</a></div><div class="sidebar-section-children"><a href="module-TextEditor.html">TextEditor</a></div><div class="sidebar-section-children"><a href="module-TextViewer.html">TextViewer</a></div><div class="sidebar-section-children"><a href="module-tipos-historico.html">tipos-historico</a></div><div class="sidebar-section-children"><a href="module-Toast.html">Toast</a></div><div class="sidebar-section-children"><a href="module-unidades-lotacao.html">unidades-lotacao</a></div><div class="sidebar-section-children"><a href="module-utils.html">utils</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="fUaN3yy2iestnezcsv-O8"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#allowCors">allowCors</a></div><div class="sidebar-section-children"><a href="global.html#authDb">authDb</a></div><div class="sidebar-section-children"><a href="global.html#authUserQa">authUserQa</a></div><div class="sidebar-section-children"><a href="global.html#Button">Button</a></div><div class="sidebar-section-children"><a href="global.html#GlobalStyle">GlobalStyle</a></div><div class="sidebar-section-children"><a href="global.html#MyApp">MyApp</a></div><div class="sidebar-section-children"><a href="global.html#normalizeString">normalizeString</a></div><div class="sidebar-section-children"><a href="global.html#toastData">toastData</a></div><div class="sidebar-section-children"><a href="global.html#variants">variants</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"><div class="some-class navbar-item"><a id="some-id" href="https://frtechnologies.com.br" target="_blank">Website</a></div><div class="some-class navbar-item"><a id="some-id" href="https://github.com/frtechdev/flem-ppe-frontend/" target="_blank">Github</a></div></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">pages_[entity]_monitoramento_index.jsx</h1></header><article><pre class="prettyprint source lang-js"><code>/**
 * Componente de página de Monitoramento
 * @module monitoramento
 */

import {
  Box,
  Button,
  ButtonGroup,
  Collapse,
  Divider,
  Flex,
  FormLabel,
  HStack,
  Heading,
  Icon,
  IconButton,
  Modal,
  ModalBody,
  ModalCloseButton,
  ModalContent,
  ModalFooter,
  ModalHeader,
  ModalOverlay,
  Stack,
  Tag,
  TagLabel,
  Text,
  Tooltip,
  chakra,
  useBoolean,
  useBreakpointValue,
  useToast,
} from "@chakra-ui/react";
import { AnimatePresenceWrapper } from "components/AnimatePresenceWrapper";
import { FormMaker } from "components/Form";
import { SelectInputBox } from "components/Inputs/SelectInputBox";
import { MenuIconButton } from "components/Menus/MenuIconButton";
import { Overlay } from "components/Overlay";
import { Table } from "components/Table";
import { IndeterminateCheckbox } from "components/Table/components/IndeterminateCheckbox";
import download from "downloadjs";
import { useCustomForm } from "hooks";
import _ from "lodash";
import { DateTime, Interval } from "luxon";
import { useRouter } from "next/router";
import { useCallback, useEffect, useMemo, useState } from "react";
import {
  FiActivity,
  FiAlertTriangle,
  FiCalendar,
  FiCheckCircle,
  FiDownload,
  FiEdit,
  FiFilter,
  FiMapPin,
  FiMoreHorizontal,
  FiRefreshCw,
  FiTrash2,
} from "react-icons/fi";
import {
  axios,
  filesAPIService,
  filesAPIUpload,
  getBackendRoute,
} from "services/apiService";
import { exceptionHandler } from "utils/exceptionHandler";
import { calcularPeriodoMonitoramentoRealizado } from "utils/monitoramento";

/**
 * Renderiza a Página de Monitoramentos
 * @method Monitoramento
 * @memberof module:monitoramento
 * @param {Object} entity a "entidade" ou "localização" do Projeto Primeiro Emprego
 * @param {Object} timeFromNetwork o timestamp da hora atual provida pelo NTP
 * @returns {Component} página renderizada
 */
export default function Monitoramento({ entity, timeFromNetwork, ...props }) {
  const router = useRouter();
  const { asPath } = router;
  const [fetchTableData, setFetchTableData] = useBoolean(true);
  const [tableData, setTableData] = useState([]);
  const [periodoSelecionado, setPeriodoSelecionado] = useState(null);
  const [anoPeriodoSelecionado, setAnoPeriodoSelecionado] = useState(null);
  const [benefFromBd, setBenefFromBd] = useState([]);
  const [escritoriosFromBd, setEscritoriosFromBd] = useState([]);
  const [municipiosFromBd, setMunicipiosFromBd] = useState([]);
  const [demandantesFromBd, setDemandantesFromBd] = useState([]);
  const [situacoesFromBd, setSituacoesFromBd] = useState([]);
  const [formacoesFromBd, setMonitoresFromBd] = useState([]);
  const [selectedTableRows, setSelectedTableRows] = useState([]);
  const [selectedRow, setSelectedRow] = useState({});
  const [monitoramentoSelecionado, setMonitoramentoSelecionado] = useState({});
  const [tableRowsCount, setTableRowsCount] = useState(null);
  const [uploadProgressAutoAvaliacao, setUploadProgressAutoAvaliacao] =
    useState();
  const [uploadProgressBenefPontoFocal, setUploadProgressBenefPontoFocal] =
    useState();
  const [uploadProgressAmbienteTrabalho, setUploadProgressAmbienteTrabalho] =
    useState();
  const [
    uploadProgressComprovacaoMonitoramento,
    setUploadProgressComprovacaoMonitoramento,
  ] = useState();
  const [uploadController, setUploadController] = useState(null);
  const [filtroAtivo, setFiltroAtivo] = useBoolean();
  const [
    buttonStateMonitoramentoComprovacao,
    setButtonStateMonitoramentoComprovacao,
  ] = useBoolean();
  const [buttonStateAutoAvaliacao, setButtonStateAutoAvaliacao] = useBoolean();
  const [buttonStateBenefPontoFocal, setButtonStateBenefPontoFocal] =
    useBoolean();
  const [buttonStateAmbienteTrabalho, setButtonStateAmbienteTrabalho] =
    useBoolean();
  const filtroAvancadoForm = useCustomForm();
  const selecionarPeriodoForm = useCustomForm();
  const monitorarBeneficiarioForm = useCustomForm();
  const anexarComprovacaoMonitoramentoForm = useCustomForm();
  const position = useBreakpointValue({ base: "bottom", sm: "top-right" });
  const toast = useToast({ duration: 5000, isClosable: false, position });

  const monitorarBeneficiarioFormInputsSection1 = [
    {
      id: "dataMonitoramento",
      label: "Data do monitoramento",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "datetime-local",
      required: "Obrigatório",
      defaultValue: !_.isEmpty(monitoramentoSelecionado)
        ? DateTime.fromISO(monitoramentoSelecionado.dataMonitoramento).toISO({
            includeOffset: false,
            suppressSeconds: true,
          })
        : "",
      validate: (v) => {
        DateTime.fromISO(v);
        if (
          DateTime.fromISO(timeFromNetwork) >=
            periodoSelecionado.trimestre.startDate &amp;&amp;
          DateTime.fromISO(timeFromNetwork) &lt;=
            periodoSelecionado.trimestre.endDate
        ) {
          return (
            (DateTime.fromISO(v) >= periodoSelecionado.trimestre.startDate &amp;&amp;
              DateTime.fromISO(v) &lt;= DateTime.fromISO(timeFromNetwork)) ||
            `Selecione uma data entre ${periodoSelecionado.trimestre.startDate.toFormat(
              "dd/MM/yyyy"
            )} e ${DateTime.fromISO(timeFromNetwork).toFormat("dd/MM/yyyy")}`
          );
        } else {
          return (
            (DateTime.fromISO(v) >= periodoSelecionado.trimestre.startDate &amp;&amp;
              DateTime.fromISO(v) &lt;= periodoSelecionado.trimestre.endDate) ||
            `Selecione uma data entre ${periodoSelecionado.trimestre.startDate.toFormat(
              "dd/MM/yyyy"
            )} e ${periodoSelecionado.trimestre.endDate.toFormat("dd/MM/yyyy")}`
          );
        }
      },
    },
    {
      id: "presencaTecnico",
      label: `${
        !_.isEmpty(selectedRow) &amp;&amp; selectedRow.sexo === "Feminino"
          ? "Beneficiária"
          : "Beneficiário"
      }  presente na unidade?`,
      formControl: monitorarBeneficiarioForm.control,
      type: "switch",
      checkedLabel: {
        true: "Sim",
        false: "Não",
      },
      defaultValue: true,
    },
    {
      id: "tipoMonitoramento",
      label: "Tipo de monitoramento",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Presencial",
          label: "Presencial",
        },
        {
          value: "Remoto",
          label: "Remoto",
        },
      ],
      required: "Obrigatório",
    },
    {
      id: "registrosVisitacao",
      label: "Principais registros do monitoramento",
      formControl: monitorarBeneficiarioForm.control,
      type: "textarea",
      rows: 10,
      required: "Obrigatório",
    },
    {
      id: "desvioFuncao",
      label: `${
        !_.isEmpty(selectedRow) &amp;&amp; selectedRow.sexo === "Feminino"
          ? "Beneficiária"
          : "Beneficiário"
      } encontra-se em desvio de função?`,
      formControl: monitorarBeneficiarioForm.control,
      type: "switch",
      checkedLabel: {
        true: "Sim",
        false: "Não",
      },
      onChange: (e) => {
        if (e.target.checked === false) {
          monitorarBeneficiarioForm.control.unregister("desvioFuncaoTipo");
          monitorarBeneficiarioForm.control.unregister("desvioFuncaoDescricao");
        }
      },
    },
    {
      id: "desvioFuncaoTipo",
      label: "Tipo de desvio de função",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Total",
          label: "Total",
        },
        {
          value: "Parcial",
          label: "Parcial",
        },
      ],
      showIn: monitorarBeneficiarioForm.control.watch("desvioFuncao") === true,
      required: "Obrigatório",
    },
    {
      id: "desvioFuncaoDescricao",
      label: "Descreva o desvio de função",
      formControl: monitorarBeneficiarioForm.control,
      type: "textarea",
      showIn: monitorarBeneficiarioForm.control.watch("desvioFuncao") === true,
      required: "Obrigatório",
    },
    {
      id: "gravidez",
      label: "Beneficiária está grávida?",
      formControl: monitorarBeneficiarioForm.control,
      type: "switch",
      checkedLabel: {
        true: "Sim",
        false: "Não",
      },
      showIn: !_.isEmpty(selectedRow) &amp;&amp; selectedRow.sexo === "Feminino",
    },
    {
      id: "acidenteTrabalho",
      label: `${
        !_.isEmpty(selectedRow) &amp;&amp; selectedRow.sexo === "Feminino"
          ? "Beneficiária"
          : "Beneficiário"
      } sofreu algum acidente de trabalho?`,
      formControl: monitorarBeneficiarioForm.control,
      type: "switch",
      checkedLabel: {
        true: "Sim",
        false: "Não",
      },
      onChange: (e) =>
        e.target.checked === false
          ? monitorarBeneficiarioForm.control.unregister(
              "acidenteTrabalhoDescricao"
            )
          : null,
    },
    {
      id: "acidenteTrabalhoDescricao",
      label: "Descreva o acidente de trabalho",
      formControl: monitorarBeneficiarioForm.control,
      type: "textarea",
      showIn:
        monitorarBeneficiarioForm.control.watch("acidenteTrabalho") === true,
      required: "Obrigatório",
    },
    {
      id: "autoAvaliacao",
      label: "Auto Avaliação",
      formControl: monitorarBeneficiarioForm.control,
      type: "file",
      uploadProgress: uploadProgressAutoAvaliacao,
      setUploadProgress: setUploadProgressAutoAvaliacao,
      uploadController,
      disabled:
        !_.isEmpty(selectedRow) &amp;&amp;
        selectedRow.statusMonitoramento.metaType === "4.1",
      disabledText: "Necessário somente nas avaliações semestrais",
    },
    {
      id: "benefPontoFocal",
      label: "Beneficiário pelo Ponto Focal",
      formControl: monitorarBeneficiarioForm.control,
      type: "file",
      uploadProgress: uploadProgressBenefPontoFocal,
      setUploadProgress: setUploadProgressBenefPontoFocal,
      uploadController,
      disabled:
        !_.isEmpty(selectedRow) &amp;&amp;
        selectedRow.statusMonitoramento.metaType === "4.1",
      disabledText: "Necessário somente nas avaliações semestrais",
    },
    {
      id: "ambienteTrabalho",
      label: "Ambiente de Trabalho",
      formControl: monitorarBeneficiarioForm.control,
      type: "file",
      uploadProgress: uploadProgressAmbienteTrabalho,
      setUploadProgress: setUploadProgressAmbienteTrabalho,
      uploadController,
      disabled:
        !_.isEmpty(selectedRow) &amp;&amp;
        selectedRow.statusMonitoramento.metaType === "4.1",
      disabledText: "Necessário somente nas avaliações semestrais",
    },
  ];

  const monitorarBeneficiarioFormInputsSection2 = [
    {
      id: "impressoesConhecimento",
      label: "Conhecimento",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Boa",
          label: "Boa",
        },
        {
          value: "Regular",
          label: "Regular",
        },
        {
          value: "Ruim",
          label: "Ruim",
        },
      ],
      required: "Obrigatório",
    },
    {
      id: "impressoesHabilidade",
      label: "Habilidade",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Boa",
          label: "Boa",
        },
        {
          value: "Regular",
          label: "Regular",
        },
        {
          value: "Ruim",
          label: "Ruim",
        },
      ],
      required: "Obrigatório",
    },
    {
      id: "impressoesAutonomia",
      label: "Autonomia",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Boa",
          label: "Boa",
        },
        {
          value: "Regular",
          label: "Regular",
        },
        {
          value: "Ruim",
          label: "Ruim",
        },
      ],
      required: "Obrigatório",
    },
    {
      id: "impressoesPontualidade",
      label: "Pontualidade",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Boa",
          label: "Boa",
        },
        {
          value: "Regular",
          label: "Regular",
        },
        {
          value: "Ruim",
          label: "Ruim",
        },
      ],
      required: "Obrigatório",
    },
    {
      id: "impressoesMotivacao",
      label: "Motivação",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Boa",
          label: "Boa",
        },
        {
          value: "Regular",
          label: "Regular",
        },
        {
          value: "Ruim",
          label: "Ruim",
        },
      ],
      required: "Obrigatório",
    },
    {
      id: "impressoesExperienciaCompFormacao",
      label: "Experiência Profissional Compatível com a Formação",
      placeholder: "Selecione...",
      formControl: monitorarBeneficiarioForm.control,
      type: "select",
      options: [
        {
          value: "Boa",
          label: "Boa",
        },
        {
          value: "Regular",
          label: "Regular",
        },
        {
          value: "Ruim",
          label: "Ruim",
        },
      ],
      required: "Obrigatório",
    },
    {
      id: "observacoesEquipePpe",
      label: "Observações",
      formControl: monitorarBeneficiarioForm.control,
      type: "textarea",
      rows: 10,
    },
  ];

  const monitorarBeneficiarioFormInputsSectionHidden = [
    {
      id: "metaType",
      formControl: monitorarBeneficiarioForm.control,
      defaultValue:
        !_.isEmpty(selectedRow) &amp;&amp; selectedRow.statusMonitoramento.metaType,
      type: "hidden",
    },
    {
      id: "beneficiario_Id",
      formControl: monitorarBeneficiarioForm.control,
      defaultValue: !_.isEmpty(selectedRow) &amp;&amp; selectedRow.id,
      type: "hidden",
    },
  ];

  const anexarComprovacaoMonitoramentoFormInputs = [
    {
      id: "comprovacaoAnexo",
      formControl: anexarComprovacaoMonitoramentoForm.control,
      type: "file",
      uploadProgress: uploadProgressComprovacaoMonitoramento,
      setUploadProgress: setUploadProgressComprovacaoMonitoramento,
      uploadController,
      validate: (v) => (_.isArray(v) &amp;&amp; v.length) || "Obrigatório",
      // disabled:
      //   !_.isEmpty(selectedRow) &amp;&amp;
      //   selectedRow.statusMonitoramento.metaType === "4.1",
      // disabledText: "Necessário somente nas avaliações semestrais",
      w: "full",
    },
  ];

  const anoPeriodoMonitoramentoOptions = useMemo(() => {
    const anoAtual = DateTime.fromISO(timeFromNetwork).year;
    const diferencaAnoInicioAnoAtual = Interval.fromDateTimes(
      DateTime.fromFormat("2022", "yyyy"),
      DateTime.fromISO(timeFromNetwork)
    )
      .toDuration("years")
      .toObject().years;
    const count = Math.trunc(diferencaAnoInicioAnoAtual);

    const options = [];
    for (let index = 0; index &lt;= count; index++) {
      const option = {
        value: (anoAtual - index).toString(),
        label: (anoAtual - index).toString(),
      };
      options.push(option);
    }

    if (DateTime.fromISO(timeFromNetwork).month === 12) {
      const option = {
        value: (anoAtual + 1).toString(),
        label: (anoAtual + 1).toString(),
      };
      options.unshift(option);
    }

    setAnoPeriodoSelecionado(options[0]);

    return options;
  }, []);

  const periodoMonitoramento = useMemo(
    () =>
      anoPeriodoSelecionado &amp;&amp;
      calcularPeriodoMonitoramentoRealizado(
        timeFromNetwork,
        parseInt(anoPeriodoSelecionado?.value)
      ).filter(
        ({ startDate }) => DateTime.fromISO(timeFromNetwork) >= startDate
      ),
    [anoPeriodoSelecionado, selecionarPeriodoForm.control.watch("anoPeriodo")]
  );

  const periodoMonitoramentoOptions = useMemo(
    () =>
      !_.isEmpty(periodoMonitoramento) &amp;&amp;
      periodoMonitoramento
        .filter(({ metaType }) => metaType === "4.1")
        .map((periodo) => ({
          ...periodo,
          value: periodo.id,
          label: `${periodo.id}º Trimestre - ${periodo.label}`,
        })),
    [periodoSelecionado]
  );

  const columns = useMemo(
    () => [
      {
        id: "selection",
        // The header can use the table's getToggleAllRowsSelectedProps method
        // to render a checkbox
        Header: ({ toggleRowSelected, isAllPageRowsSelected, rows }) => {
          const modifiedOnChange = (event) => {
            rows.forEach((row) => {
              //check each row if it is not disabled
              row.original.statusMonitoramento.anexarComprovacao &amp;&amp;
                toggleRowSelected(row.id, event.target.checked);
            });
          };
          let selectableRowsInCurrentPage = 0;
          let selectedRowsInCurrentPage = 0;
          rows.forEach((row) => {
            row.isSelected &amp;&amp; selectedRowsInCurrentPage++;
            row.original.statusMonitoramento.anexarComprovacao &amp;&amp;
              selectableRowsInCurrentPage++;
          });
          const disabled = selectableRowsInCurrentPage === 0;
          const checked =
            (isAllPageRowsSelected ||
              selectableRowsInCurrentPage === selectedRowsInCurrentPage) &amp;&amp;
            !disabled;

          return (
            &lt;IndeterminateCheckbox
              onChange={modifiedOnChange}
              checked={checked}
              isDisabled={disabled}
              indeterminate={
                selectedRowsInCurrentPage >= 1 &amp;&amp;
                selectableRowsInCurrentPage !== selectedRowsInCurrentPage
              }
            />
          );
        },
        // The cell can use the individual row's getToggleRowSelectedProps method
        // to the render a checkbox
        Cell: ({ row }) => (
          &lt;Tooltip
            placement="right"
            label={
              row.original.statusMonitoramento.anexarComprovacao
                ? "Selecionar para anexar comprovação"
                : "Não é possível selecionar sem haver monitoramentos"
            }
          >
            &lt;div>
              &lt;IndeterminateCheckbox
                {...row.getToggleRowSelectedProps()}
                isDisabled={!row.original.statusMonitoramento.anexarComprovacao}
              />
            &lt;/div>
          &lt;/Tooltip>
        ),
        Footer: false,
      },
      {
        Header: "cpf",
        accessor: "cpf",
        Cell: ({ value }) => &lt;Box>{value}&lt;/Box>,
        Footer: false,
      },
      {
        Header: "beneficiário",
        accessor: "nome",
        Cell: ({ value }) => &lt;Text noOfLines={2}>{value}&lt;/Text>,
        Footer: false,
      },
      {
        Header: "unidade de lotação",
        accessor: "vaga.unidadeLotacao.nome",
        Cell: ({ value }) => &lt;Text noOfLines={2}>{value}&lt;/Text>,
        Footer: false,
      },
      // {
      //   Header: "data de admissão",
      //   Cell: ({ value }) => &lt;Text noOfLines={2}>{value}&lt;/Text>,
      //   Footer: false,
      // },
      {
        Header: "início do contrato",
        accessor: ({ dataInicioAtividade }) => dataInicioAtividade,
        Cell: ({ value }) => (
          &lt;Text noOfLines={2}>
            {DateTime.fromISO(value)
              .setLocale("pt-BR")
              .toLocaleString(DateTime.DATE_MED)}
          &lt;/Text>
        ),
        Footer: false,
      },
      {
        Header: "término do contrato",
        accessor: ({ dataInicioAtividade }) => dataInicioAtividade,
        Cell: ({ value }) => (
          &lt;Text noOfLines={2}>
            {DateTime.fromISO(value)
              .setLocale("pt-BR")
              .plus({ months: 24, days: -2 })
              .toLocaleString(DateTime.DATE_MED)}
          &lt;/Text>
        ),
        Footer: false,
      },
      {
        Header: "status monitoramento",
        // accessor: ({ statusMonitoramento, monitoramentos }) => ({
        //   statusMonitoramento,
        //   monitoramentos,
        // }),
        accessor: "statusMonitoramento.label",
        Cell: ({
          row: {
            original: {
              statusMonitoramento: { label, tooltip, color, icon },
              monitoramentos,
            },
          },
        }) => {
          const ultimoMonitoramento = obterUltimoMonitoramento(
            monitoramentos,
            _.isEmpty(periodoSelecionado)
              ? obterPeriodoSelecionado()
              : periodoSelecionado
          );

          if (_.isEmpty(ultimoMonitoramento)) {
            return (
              &lt;Box minW={200}>
                &lt;Tooltip label={tooltip}>
                  &lt;Tag colorScheme={color} borderRadius="full">
                    &lt;Icon as={icon} ml={-0.5} mr={1} />
                    &lt;TagLabel>{label}&lt;/TagLabel>
                  &lt;/Tag>
                &lt;/Tooltip>
              &lt;/Box>
            );
          }
          return (
            &lt;Stack minW={202}>
              &lt;Box>
                &lt;Tooltip label={tooltip}>
                  &lt;Tag colorScheme={color} borderRadius="full">
                    &lt;Icon as={icon} ml={-0.5} mr={1} />
                    &lt;TagLabel>{label}&lt;/TagLabel>
                  &lt;/Tag>
                &lt;/Tooltip>
              &lt;/Box>
              &lt;Tooltip
                label={`${DateTime.fromISO(
                  ultimoMonitoramento.dataMonitoramento
                )
                  .setLocale("pt-BR")
                  .toLocaleString(DateTime.DATETIME_MED)}h`}
              >
                &lt;Tag colorScheme={color} borderRadius="full">
                  &lt;Icon as={FiCalendar} ml={-0.5} mr={1} />
                  &lt;TagLabel>
                    {DateTime.fromISO(ultimoMonitoramento.dataMonitoramento)
                      .setLocale("pt-BR")
                      .toLocaleString(DateTime.DATETIME_MED)}
                    h
                  &lt;/TagLabel>
                &lt;/Tag>
              &lt;/Tooltip>
            &lt;/Stack>
          );
        },
        Footer: false,
      },
      {
        Header: "arquivos",
        // accessor: ({ statusMonitoramento, monitoramentos }) => ({
        //   statusMonitoramento,
        //   monitoramentos,
        // }),
        Cell: ({
          row: {
            original: {
              monitoramentos,
              // : {
              //   monitoramentoComprovacao_Id,
              //   autoAvaliacao_anexoId,
              //   benefPontoFocal_anexoId,
              //   ambienteTrabalho_anexoId,
              //   ...monitoramentos
              // },
            },
          },
        }) => {
          const ultimoMonitoramento = obterUltimoMonitoramento(
            monitoramentos,
            _.isEmpty(periodoSelecionado)
              ? obterPeriodoSelecionado()
              : periodoSelecionado
          );
          if (
            _.isEmpty(ultimoMonitoramento) ||
            (_.isEmpty(ultimoMonitoramento.monitoramentoComprovacao_Id) &amp;&amp;
              _.isEmpty(ultimoMonitoramento.autoAvaliacao_anexoId) &amp;&amp;
              _.isEmpty(ultimoMonitoramento.benefPontoFocal_anexoId) &amp;&amp;
              _.isEmpty(ultimoMonitoramento.ambienteTrabalho_anexoId))
          ) {
            return &lt;Box minW={200}>&lt;/Box>;
          }

          return (
            &lt;Stack minW={250}>
              {!_.isEmpty(ultimoMonitoramento.monitoramentoComprovacao_Id) &amp;&amp; (
                &lt;Box>
                  &lt;Tooltip label="Comprovação Monitoramento">
                    &lt;Button
                      as={Tag}
                      h={1}
                      colorScheme="brand1"
                      borderRadius="full"
                      size="sm"
                      variant="outline"
                      isLoading={buttonStateMonitoramentoComprovacao}
                      loadingText="Aguarde..."
                      onClick={() => {
                        downloadFile(
                          {
                            referenceObjId:
                              ultimoMonitoramento.monitoramentoComprovacao_Id,
                          },
                          setButtonStateMonitoramentoComprovacao
                        );
                      }}
                    >
                      &lt;Icon as={FiDownload} ml={-0.5} mr={1} />
                      &lt;TagLabel>Comprovação Monitoramento&lt;/TagLabel>
                    &lt;/Button>
                  &lt;/Tooltip>
                &lt;/Box>
              )}
              {!_.isEmpty(ultimoMonitoramento.autoAvaliacao_anexoId) &amp;&amp; (
                &lt;Box>
                  &lt;Tooltip label="Auto Avaliação">
                    &lt;Button
                      as={Tag}
                      h={1}
                      colorScheme="brand1"
                      borderRadius="full"
                      size="sm"
                      variant="outline"
                      isLoading={buttonStateAutoAvaliacao}
                      loadingText="Aguarde..."
                      onClick={() =>
                        downloadFile(
                          {
                            fileId: JSON.parse(
                              ultimoMonitoramento.autoAvaliacao_anexoId
                            ).pop().id,
                          },
                          setButtonStateAutoAvaliacao
                        )
                      }
                    >
                      &lt;Icon as={FiDownload} ml={-0.5} mr={1} />
                      &lt;TagLabel>Auto Avaliação&lt;/TagLabel>
                    &lt;/Button>
                  &lt;/Tooltip>
                &lt;/Box>
              )}
              {!_.isEmpty(ultimoMonitoramento.benefPontoFocal_anexoId) &amp;&amp; (
                &lt;Box>
                  &lt;Tooltip label="Beneficiário pelo Ponto Focal">
                    &lt;Button
                      as={Tag}
                      h={1}
                      colorScheme="brand1"
                      borderRadius="full"
                      size="sm"
                      variant="outline"
                      isLoading={buttonStateBenefPontoFocal}
                      loadingText="Aguarde..."
                      onClick={() =>
                        downloadFile(
                          {
                            fileId: JSON.parse(
                              ultimoMonitoramento.benefPontoFocal_anexoId
                            ).pop().id,
                          },
                          setButtonStateBenefPontoFocal
                        )
                      }
                    >
                      &lt;Icon as={FiDownload} ml={-0.5} mr={1} />
                      &lt;TagLabel>Beneficiário pelo Ponto Focal&lt;/TagLabel>
                    &lt;/Button>
                  &lt;/Tooltip>
                &lt;/Box>
              )}
              {!_.isEmpty(ultimoMonitoramento.ambienteTrabalho_anexoId) &amp;&amp; (
                &lt;Box>
                  &lt;Tooltip label="Ambiente de Trabalho">
                    &lt;Button
                      as={Tag}
                      h={1}
                      colorScheme="brand1"
                      borderRadius="full"
                      size="sm"
                      variant="outline"
                      isLoading={buttonStateAmbienteTrabalho}
                      loadingText="Aguarde..."
                      onClick={() =>
                        downloadFile(
                          {
                            fileId: JSON.parse(
                              ultimoMonitoramento.ambienteTrabalho_anexoId
                            ).pop().id,
                          },
                          setButtonStateAmbienteTrabalho
                        )
                      }
                    >
                      &lt;Icon as={FiDownload} ml={-0.5} mr={1} />
                      &lt;TagLabel>Ambiente de Trabalho&lt;/TagLabel>
                    &lt;/Button>
                  &lt;/Tooltip>
                &lt;/Box>
              )}
            &lt;/Stack>
          );
        },
        Footer: false,
      },
      {
        Header: "Ações",
        Cell: (props) => (
          &lt;MenuIconButton
            icon={&lt;FiMoreHorizontal />}
            menuItems={[
              {
                menuGroupLabel: null,
                menuGroupButtons: [
                  props.row.original.statusMonitoramento.label === "Realizado"
                    ? {
                        text: "Editar Monitoramento",
                        icon: &lt;FiEdit />,
                        onClick: () => {
                          const ultimoMonitoramento = obterUltimoMonitoramento(
                            props.row.original.monitoramentos,
                            _.isEmpty(periodoSelecionado)
                              ? obterPeriodoSelecionado()
                              : periodoSelecionado
                          );
                          setSelectedRow(props.row.original);
                          setMonitoramentoSelecionado(ultimoMonitoramento);
                          monitorarBeneficiarioForm.openOverlay();
                        },
                      }
                    : null,
                  {
                    text: "Registrar Visita",
                    icon: &lt;FiMapPin />,
                    onClick: () => {
                      setSelectedRow(props.row.original);
                    },
                    isDisabled:
                      props.row.original.statusMonitoramento.label ===
                      "Realizado",
                  },
                  {
                    text: "Monitorar",
                    icon: &lt;FiActivity />,
                    onClick: () => {
                      setSelectedRow(props.row.original);
                      monitorarBeneficiarioForm.openOverlay();
                    },
                    isDisabled:
                      props.row.original.statusMonitoramento.label ===
                      "Realizado",
                  },
                ],
              },
            ]}
            colorScheme="brand1"
          />
        ),
        Footer: false,
      },
    ],
    [
      periodoSelecionado,
      buttonStateMonitoramentoComprovacao,
      buttonStateAutoAvaliacao,
      buttonStateBenefPontoFocal,
      buttonStateAmbienteTrabalho,
    ]
  );

  const data = useMemo(() => tableData, [tableData]);

  const fileUpload = async (data, setUploadProgress) => {
    const config = {
      signal: uploadController.signal,
      onUploadProgress: (event) => {
        setUploadProgress(Math.round((event.loaded * 100) / event.total));
      },
    };
    const response = await filesAPIUpload.post(`/uploadFile`, data, config);
    return response;
  };

  const downloadFile = async (objId, buttonState) => {
    buttonState.on();
    const {
      data: { fileDetails },
    } = await filesAPIService.get(`/getFile`, {
      params: objId,
    });
    const { data: file } = await filesAPIService.get(`/downloadFile`, {
      params: {
        fileId: fileDetails.id,
      },
      responseType: "blob",
    });
    download(file, fileDetails.name, fileDetails.contentType);
    buttonState.off();
  };

  const filtroAvancadoFormSubmit = async (formData, e) => {
    e.preventDefault();
    const {
      escritoriosRegionais = [],
      municipios = [],
      demandantes = [],
      situacaoBenef = [],
      formacoes = [],
    } = formData;

    const filteredRows = benefFromBd
      .filter(
        ({
          vaga: {
            municipio: { escritorio_RegionalId },
          },
        }) =>
          _.isEmpty(escritoriosRegionais)
            ? true
            : escritoriosRegionais
                .map(({ value }) => value)
                .includes(escritorio_RegionalId)
      )
      .filter(({ vaga: { municipio_Id } }) =>
        _.isEmpty(municipios)
          ? true
          : municipios.map(({ value }) => value).includes(municipio_Id)
      )
      .filter(({ vaga: { demandante_Id } }) =>
        _.isEmpty(demandantes)
          ? true
          : demandantes.map(({ value }) => value).includes(demandante_Id)
      )
      .filter(({ vaga: { situacaoVaga_Id } }) =>
        _.isEmpty(situacaoBenef)
          ? true
          : situacaoBenef.map(({ value }) => value).includes(situacaoVaga_Id)
      )
      .filter(({ formacao_Id }) =>
        _.isEmpty(formacoes)
          ? true
          : formacoes.map(({ value }) => value).includes(formacao_Id)
      );

    setTableData(filteredRows);
    if (
      _.isEmpty(escritoriosRegionais) &amp;&amp;
      _.isEmpty(municipios) &amp;&amp;
      _.isEmpty(demandantes) &amp;&amp;
      _.isEmpty(situacaoBenef) &amp;&amp;
      _.isEmpty(formacoes)
    ) {
      setFiltroAtivo.off();
    } else {
      setFiltroAtivo.on();
    }
    return filtroAvancadoForm.closeOverlay();
  };

  const selecionarPeriodoFormSubmit = async ({ anoPeriodo, idPeriodo }, e) => {
    e.preventDefault();
    selecionarPeriodoForm.setLoading();

    setPeriodoSelecionado(obterPeriodoSelecionado(idPeriodo));

    selecionarPeriodoForm.setLoaded();
    selecionarPeriodoForm.closeOverlay();
  };

  const monitorarBeneficiarioFormSubmit = async (formData, e) => {
    try {
      monitorarBeneficiarioForm.setLoading();
      e.preventDefault();
      const {
        autoAvaliacao,
        benefPontoFocal,
        ambienteTrabalho,
        ...restFormData
      } = formData;

      if (_.isArray(autoAvaliacao) &amp;&amp; !_.isEmpty(autoAvaliacao)) {
        const anexos = new FormData();
        autoAvaliacao.map((file, idx) => anexos.append(`files`, file));
        const { data: uploadedFiles } = await fileUpload(
          anexos,
          setUploadProgressAutoAvaliacao
        );
        restFormData.autoAvaliacao = uploadedFiles;
      } else if (!_.isEmpty(monitoramentoSelecionado)) {
        restFormData.ambienteTrabalho = JSON.parse(
          monitoramentoSelecionado.autoAvaliacao_anexoId
        );
      }

      if (_.isArray(benefPontoFocal) &amp;&amp; !_.isEmpty(benefPontoFocal)) {
        const anexos = new FormData();
        benefPontoFocal.map((file, idx) => anexos.append(`files`, file));
        const { data: uploadedFiles } = await fileUpload(
          anexos,
          setUploadProgressBenefPontoFocal
        );
        restFormData.benefPontoFocal = uploadedFiles;
      } else if (!_.isEmpty(monitoramentoSelecionado)) {
        restFormData.ambienteTrabalho = JSON.parse(
          monitoramentoSelecionado.benefPontoFocal_anexoId
        );
      }

      if (_.isArray(ambienteTrabalho) &amp;&amp; !_.isEmpty(ambienteTrabalho)) {
        const anexos = new FormData();
        ambienteTrabalho.map((file, idx) => anexos.append(`files`, file));
        const { data: uploadedFiles } = await fileUpload(
          anexos,
          setUploadProgressAmbienteTrabalho
        );
        restFormData.ambienteTrabalho = uploadedFiles;
      } else if (!_.isEmpty(monitoramentoSelecionado)) {
        restFormData.ambienteTrabalho = JSON.parse(
          monitoramentoSelecionado.ambienteTrabalho_anexoId
        );
      }

      if (!_.isEmpty(monitoramentoSelecionado)) {
        const { status } = await axios.put(
          getBackendRoute(entity, "monitoramentos"),
          restFormData,
          {
            params: {
              id: monitoramentoSelecionado.id,
            },
          }
        );

        if (status === 200) {
          toast({
            title: "Monitoramento alterado com sucesso",
            status: "success",
          });
          monitorarBeneficiarioForm.closeOverlay();
          monitorarBeneficiarioForm.control.reset({});
        }
      } else {
        const { status } = await axios.post(
          getBackendRoute(entity, "monitoramentos"),
          restFormData
        );

        if (status === 200) {
          toast({
            title: "Monitoramento efetuado com sucesso",
            status: "success",
          });
          monitorarBeneficiarioForm.closeOverlay();
          monitorarBeneficiarioForm.control.reset({});
        }
      }
    } catch (error) {
      toast(exceptionHandler(error));
    } finally {
      monitorarBeneficiarioForm.setLoaded();
    }
  };

  const anexarComprovacaoMonitoramentoFormSubmit = async (
    { comprovacaoAnexo, ...restFormData },
    e
  ) => {
    anexarComprovacaoMonitoramentoForm.setLoading();
    e.preventDefault();
    try {
      if (_.isArray(comprovacaoAnexo) &amp;&amp; !_.isEmpty(comprovacaoAnexo)) {
        const anexos = new FormData();
        comprovacaoAnexo.map((file, idx) => anexos.append(`files`, file));
        const { data: uploadedFiles } = await fileUpload(
          anexos,
          setUploadProgressComprovacaoMonitoramento
        );
        restFormData.comprovacaoAnexo = uploadedFiles;
      }

      restFormData.monitoramentosParaAnexarComprovacao = selectedTableRows.map(
        ({ original }) => original.statusMonitoramento.ultimoMonitoramento
      );

      const { status } = await axios.post(
        getBackendRoute(entity, "monitoramentos/anexar-comprovacao"),
        restFormData
      );

      if (status === 200) {
        toast({
          title: "Comprovação anexada com sucesso",
          status: "success",
        });
        anexarComprovacaoMonitoramentoForm.closeOverlay();
        anexarComprovacaoMonitoramentoForm.control.reset({});
      }
    } catch (error) {
      toast(exceptionHandler(error));
    } finally {
      anexarComprovacaoMonitoramentoForm.setLoaded();
    }
  };

  const limparFiltroAvancado = () => {
    setTableData(benefFromBd);
    return setFiltroAtivo.off();
  };

  const checarMonitoramentos = (
    periodoSelecionado,
    dataInicioAtividade,
    monitoramentos
  ) => {
    const trimestreSelecionado = periodoSelecionado.trimestre;

    const periodoEfetivoNaContratacao = periodoMonitoramento.find(
      ({ startDate, endDate, metaType }) =>
        DateTime.fromISO(dataInicioAtividade) >=
          startDate.set({
            year: DateTime.fromISO(dataInicioAtividade).year,
          }) &amp;&amp;
        DateTime.fromISO(dataInicioAtividade) &lt;=
          endDate.set({
            year: DateTime.fromISO(dataInicioAtividade).year,
          }) &amp;&amp;
        metaType === "4.1"
    );

    const inicioAnteriorDia10 = _.isObject(
      periodoMonitoramento.find(
        ({ startDate, cutDate, metaType }) =>
          DateTime.fromISO(dataInicioAtividade) >=
            startDate.set({
              year: DateTime.fromISO(dataInicioAtividade).year,
            }) &amp;&amp;
          DateTime.fromISO(dataInicioAtividade) &lt;=
            cutDate.set({
              year: DateTime.fromISO(dataInicioAtividade).year,
            }) &amp;&amp;
          metaType === "4.1"
      )
    );

    if (_.isEmpty(monitoramentos)) {
      if (
        !inicioAnteriorDia10 &amp;&amp;
        periodoEfetivoNaContratacao === trimestreSelecionado
      ) {
        // regras de monitoramento para beneficiários contratados após o período de corte de cada trimestre
        return {
          label: "Não elegível",
          tooltip:
            "Beneficiário contratado no trimestre efetivo, fora do período de corte (dez primeiros dias no início do trimeste).",
          metaType: undefined,
          color: "orange",
          icon: FiAlertTriangle,
          anexarComprovacao: false,
        };
      }

      // se monitoramentos estiver vazio, o beneficiário ainda não teve nenhum monitoramento realizado. Logo, deve ser realizado o primeiro monitoramento trimestral (metaType 4.1), no mesmo trimestre de contratação. Caso não seja monitorado no trimestre de contratação, o próximo monitoramento DEVE ser o semestral (metaType 4.2)

      if (periodoEfetivoNaContratacao !== trimestreSelecionado) {
        return {
          label: "Pendente Avaliação",
          metaType: "4.2",
          color: "red",
          icon: FiAlertTriangle,
        };
      } else {
        return {
          label: "Pendente Monitoramento",
          metaType: "4.1",
          color: "red",
          icon: FiAlertTriangle,
        };
      }
    }

    // se monitoramentos NÃO estiver vazio, é necessário verificar se o último monitoramento foi realizado dentro do trimestre ou semestre vigente.

    const ultimoMonitoramentoPeriodoSelecionado = monitoramentos.find(
      ({ dataMonitoramento }) =>
        DateTime.fromISO(dataMonitoramento) >= trimestreSelecionado.startDate &amp;&amp;
        DateTime.fromISO(dataMonitoramento) &lt;= trimestreSelecionado.endDate
    );

    const ultimoMonitoramento = monitoramentos.find(
      ({ dataMonitoramento }) =>
        DateTime.fromISO(dataMonitoramento) &lt;= trimestreSelecionado.startDate ||
        (DateTime.fromISO(dataMonitoramento) >=
          trimestreSelecionado.startDate &amp;&amp;
          DateTime.fromISO(dataMonitoramento) &lt;= trimestreSelecionado.endDate)
    );

    // se o último monitoramento foi realizado dentro do trimestre ou semestre vigente, retornar Realizado.
    if (!_.isEmpty(ultimoMonitoramentoPeriodoSelecionado)) {
      return {
        label: "Realizado",
        metaType: ultimoMonitoramento.metaType,
        color: "green",
        icon: FiCheckCircle,
        anexarComprovacao:
          _.isEmpty(ultimoMonitoramento.monitoramentoComprovacao_Id) &amp;&amp;
          ultimoMonitoramento.metaType === "4.2",
        ultimoMonitoramento,
      };
    }

    if (_.isEmpty(ultimoMonitoramento)) {
      return {
        label: `Pendente Monitoramento`,
        metaType: `4.1`,
        color: "red",
        icon: FiAlertTriangle,
        anexarComprovacao: false,
      };
    }
    // se o último monitoramento foi realizado fora do trimestre ou semestre vigente, e o metaType for 4.1, próximo monitoramento será semestral. Retornar Pendente Avaliação, com metaType 4.2.

    // se o último monitoramento foi realizado fora do trimestre ou semestre vigente, e o metaType for 4.1, próximo monitoramento será semestral. Retornar Pendente Avaliação, com metaType 4.2.
    return {
      label: `Pendente ${
        ultimoMonitoramento.metaType === "4.1" ? " Avaliação" : "Monitoramento"
      }`,
      metaType: `${ultimoMonitoramento.metaType === "4.1" ? "4.2" : "4.1"}`,
      color: "red",
      icon: FiAlertTriangle,
      anexarComprovacao: false,
    };
  };

  const obterUltimoMonitoramento = (monitoramentos, periodoSelecionado) => {
    const trimestreAtual = periodoSelecionado.trimestre;
    return monitoramentos.find(
      ({ dataMonitoramento }) =>
        DateTime.fromISO(dataMonitoramento) >= trimestreAtual.startDate &amp;&amp;
        DateTime.fromISO(dataMonitoramento) &lt;= trimestreAtual.endDate
    );
  };

  useEffect(() => {
    setUploadController(new AbortController());
  }, []);

  const obterPeriodoSelecionado = (idPeriodo) => {
    const anoSelecionado = parseInt(anoPeriodoSelecionado.value);
    const periodosPorAnoSelecionado = calcularPeriodoMonitoramentoRealizado(
      timeFromNetwork,
      anoSelecionado
    );

    const todayDate = DateTime.fromISO(timeFromNetwork).setLocale("pt-BR");

    const trimestre = periodosPorAnoSelecionado.find(
      ({ id, startDate, endDate, metaType }) => {
        if (!_.isEmpty(idPeriodo)) {
          return id === idPeriodo;
        }
        return (
          todayDate.set({
            year: todayDate.month === 12 ? anoSelecionado - 1 : anoSelecionado,
          }) >= startDate &amp;&amp;
          todayDate.set({
            year: todayDate.month === 12 ? anoSelecionado - 1 : anoSelecionado,
          }) &lt;= endDate &amp;&amp;
          metaType === "4.1"
        );
      }
    );

    const semestre =
      trimestre.id &lt;= 2
        ? periodosPorAnoSelecionado.find(
            ({ startDate, endDate, metaType, id }) => id === "5"
          )
        : periodosPorAnoSelecionado.find(
            ({ startDate, endDate, metaType, id }) => id === "6"
          );

    return {
      trimestre,
      semestre,
    };
  };

  useEffect(() => {
    setPeriodoSelecionado(obterPeriodoSelecionado());
  }, [anoPeriodoSelecionado]);

  useEffect(() => {
    setFetchTableData.on();
    const preLoadPeriodo = _.isEmpty(periodoSelecionado)
      ? obterPeriodoSelecionado()
      : periodoSelecionado;
    axios
      .get(getBackendRoute(entity, "monitoramentos"))
      //.get(`/api/${entity}/monitoramento`)
      .then(({ data }) => {
        // bdRhService.get(`/funcionarios`);
        const rows = data
          .filter(({ dataInicioAtividade }) => {
            /**
                Implementar lógica para desbloqueio de monitoramento de beneficiários desligados, mediante autorização da gestão feita pela página de cadastro de monitores
             */
            return (
              DateTime.fromISO(timeFromNetwork) &lt;
                DateTime.fromISO(dataInicioAtividade).plus({ years: 2 }) &amp;&amp;
              DateTime.fromISO(dataInicioAtividade)
                .diff(preLoadPeriodo.trimestre.endDate, "days")
                .toObject().days &lt; 0
            );
          })
          .map(({ vaga, monitoramentos, dataInicioAtividade, ...benef }) => ({
            ...benef,
            dataInicioAtividade,
            monitoramentos,
            vaga: vaga.shift(),
            statusMonitoramento: checarMonitoramentos(
              _.isEmpty(periodoSelecionado)
                ? preLoadPeriodo
                : periodoSelecionado,
              dataInicioAtividade,
              monitoramentos
            ),
          }));
        setBenefFromBd(rows);
        setTableData(rows);
      })
      .finally(setFetchTableData.off);
  }, [monitorarBeneficiarioForm.overlayIsOpen, periodoSelecionado]);

  const escritoriosRegionais = filtroAvancadoForm.control.watch(
    "escritoriosRegionais"
  );

  const municipios = filtroAvancadoForm.control.watch("municipios");

  const demandantes = filtroAvancadoForm.control.watch("demandantes");

  const unidadesLotacao = filtroAvancadoForm.control.watch("unidadesLotacao");

  const monitores = filtroAvancadoForm.control.watch("monitores");

  const { _fields } = filtroAvancadoForm.control.control;

  useEffect(() => {
    axios
      .get(getBackendRoute(entity, "escritorios-regionais"))
      //.get(`/api/${entity}/escritorios-regionais`)
      .then((res) => {
        if (res.status === 200) {
          setEscritoriosFromBd(
            res.data.map(({ id, nome }) => ({
              value: id,
              label: nome,
            }))
          );
        }
      })
      .catch((error) => toast(exceptionHandler(error)));
    _fields.municipios?._f.ref.clearValue();
    _fields.demandantes?._f.ref.clearValue();
    _fields.unidadesLotacao?._f.ref.clearValue();
    _fields.monitores?._f.ref.clearValue();
  }, [escritoriosRegionais]);

  useEffect(() => {
    axios
      .get(
        getBackendRoute(entity, "municipios"),
        //.get(`/api/${entity}/municipios`,
        _.isEmpty(escritoriosRegionais)
          ? {}
          : {
              params: {
                escritorioRegional_Id: JSON.stringify(
                  escritoriosRegionais?.map(({ value }) => value)
                ),
              },
            }
      )
      .then((res) => {
        if (res.status === 200) {
          setMunicipiosFromBd(
            res.data.map(({ id, nome }) => ({
              value: id,
              label: nome,
            }))
          );
        }
      })
      .catch((error) => toast(exceptionHandler(error)));
    _fields.demandantes?._f.ref.clearValue();
    _fields.unidadesLotacao?._f.ref.clearValue();
  }, [escritoriosRegionais, municipios]);

  useEffect(() => {
    axios
      .get(getBackendRoute(entity, "demandantes"), {
        //.get(`/api/${entity}/demandantes`, {
        params: {
          municipio_Id: _.isEmpty(municipios)
            ? null
            : JSON.stringify(municipios?.map(({ value }) => value)),
          escritorioRegional_Id: _.isEmpty(escritoriosRegionais)
            ? null
            : JSON.stringify(escritoriosRegionais?.map(({ value }) => value)),
        },
      })
      .then((res) => {
        if (res.status === 200) {
          setDemandantesFromBd(
            res.data.map(({ id, nome, sigla }) => ({
              value: id,
              label: `${sigla} - ${nome}`,
            }))
          );
        }
      })
      .catch((error) => toast(exceptionHandler(error)));
    _fields.demandantes?._f.ref.clearValue();
  }, [municipios]);

  useEffect(() => {
    axios
      .get(
        getBackendRoute(entity, "unidades-lotacao"),
        //`/api/${entity}/unidades-lotacao`,
        _.isEmpty(escritoriosRegionais) &amp;&amp;
          _.isEmpty(municipios) &amp;&amp;
          _.isEmpty(demandantes)
          ? {}
          : {
              params: {
                escritorioRegional_Id: _.isEmpty(escritoriosRegionais)
                  ? null
                  : JSON.stringify(
                      escritoriosRegionais?.map(({ value }) => value)
                    ),
                municipio_Id: _.isEmpty(municipios)
                  ? null
                  : JSON.stringify(municipios?.map(({ value }) => value)),
                demandante_Id: _.isEmpty(demandantes)
                  ? null
                  : JSON.stringify(demandantes?.map(({ value }) => value)),
              },
            }
      )
      .then((res) => {
        if (res.status === 200) {
          setSituacoesFromBd(
            res.data.map(({ id, nome }) => ({
              value: id,
              label: nome,
            }))
          );
        }
      })
      .catch((error) => toast(exceptionHandler(error)));
  }, [demandantes, escritoriosRegionais, municipios]);

  useEffect(() => {
    axios
      .get(
        //`/api/${entity}/monitores`,
        getBackendRoute(entity, "monitores"),
        _.isEmpty(escritoriosRegionais) &amp;&amp; _.isEmpty(municipios)
          ? {}
          : {
              params: {
                escritorioRegional_Id: _.isEmpty(escritoriosRegionais)
                  ? null
                  : JSON.stringify(
                      escritoriosRegionais?.map(({ value }) => value)
                    ),
                municipio_Id: _.isEmpty(municipios)
                  ? null
                  : JSON.stringify(municipios?.map(({ value }) => value)),
              },
            }
      )
      .then((res) => {
        if (res.status === 200) {
          setMonitoresFromBd(
            res.data.map(({ id, matricula, nome }) => ({
              value: id,
              label: `${matricula} - ${nome}`,
            }))
          );
        }
      })
      .catch((error) => toast(exceptionHandler(error)));
  }, [escritoriosRegionais, municipios]);

  useEffect(() => {
    if (entity === null) {
      router.push("/ba/dashboard");
    }
  }, [asPath]);

  const getAnexoDetails = useCallback(async (anexoId) => {
    const {
      data: { fileDetails },
    } = await filesAPIService.get(`/getFile`, {
      params: {
        referenceObjId: anexoId,
      },
    });
  }, []);

  return (
    &lt;>
      &lt;AnimatePresenceWrapper router={router} isLoaded={!fetchTableData}>
        &lt;Flex
          justifyContent="space-between"
          alignItems="center"
          pb={5}
          minH="60px"
          flexWrap="wrap"
        >
          &lt;Box order={0}>
            &lt;Heading fontSize={{ md: "1.4rem" }}>Monitoramento&lt;/Heading>
            &lt;Heading size="xs" color="gray.500" mt={{ md: 1 }}>
              {tableRowsCount &amp;&amp; tableRowsCount === 0
                ? `Nenhum registro encontrado`
                : tableRowsCount === 1
                ? `${tableRowsCount} registro encontrado`
                : `${tableRowsCount} registros encontrados`}
            &lt;/Heading>
          &lt;/Box>
          &lt;HStack
            order={{ base: 3, md: 2 }}
            justifyContent={{ base: "space-between", sm: "center" }}
            flex="1"
            pt={{ base: 4, sm: 0 }}
          >
            &lt;Box p={1} bg="gray.200" rounded="md" shadow="sm">
              &lt;HStack justifyContent="space-between">
                &lt;Heading size="xs">Trimestre Efetivo&lt;/Heading>
                &lt;Icon as={FiCalendar} />
              &lt;/HStack>
              &lt;Heading fontSize="xs" color="gray.500" mt={0.5}>
                {!_.isEmpty(periodoSelecionado) &amp;&amp;
                  periodoSelecionado.trimestre.label}
              &lt;/Heading>
            &lt;/Box>
            &lt;Box p={1} bg="gray.200" rounded="md" shadow="sm">
              &lt;HStack justifyContent="space-between">
                &lt;Heading size="xs">Semestre Efetivo&lt;/Heading>
                &lt;Icon as={FiCalendar} />
              &lt;/HStack>
              &lt;Heading fontSize="xs" color="gray.500" mt={0.5}>
                {!_.isEmpty(periodoSelecionado) &amp;&amp;
                  periodoSelecionado.semestre.label}
              &lt;/Heading>
            &lt;/Box>
            &lt;Tooltip label="Alterar período">
              &lt;Button
                position="relative"
                colorScheme="brand1"
                variant="outline"
                onClick={selecionarPeriodoForm.openOverlay}
              >
                &lt;Icon as={FiCalendar} position="absolute" boxSize={6} />
                &lt;Icon
                  as={FiRefreshCw}
                  position="absolute"
                  bottom="2px"
                  right="2px"
                  boxSize={4}
                  bg="gray.300"
                  p={0.5}
                  rounded="full"
                />
              &lt;/Button>
            &lt;/Tooltip>
          &lt;/HStack>
          &lt;ButtonGroup
            isAttached={filtroAtivo}
            size={{ base: "sm", sm: "md" }}
            order={2}
          >
            &lt;Button
              colorScheme="brand1"
              shadow="md"
              leftIcon={
                &lt;FiFilter fill={filtroAtivo ? "currentColor" : "none"} />
              }
              onClick={filtroAvancadoForm.openOverlay}
              variant={filtroAtivo ? "solid" : "outline"}
            >
              Filtro Avançado {filtroAtivo &amp;&amp; "Ativo"}
            &lt;/Button>
            &lt;Tooltip label="Limpar Filtro" hidden={!filtroAtivo}>
              &lt;IconButton
                variant="solid"
                colorScheme="red"
                hidden={!filtroAtivo}
                icon={&lt;FiTrash2 />}
                onClick={limparFiltroAvancado}
              />
            &lt;/Tooltip>
          &lt;/ButtonGroup>
        &lt;/Flex>
        &lt;Flex as={Collapse} in={selectedTableRows.length >= 1}>
          &lt;Stack
            as={chakra.form}
            flex="1"
            p={2}
            bg="brand1.50"
            rounded="md"
            onSubmit={anexarComprovacaoMonitoramentoForm.handleSubmit(
              anexarComprovacaoMonitoramentoFormSubmit
            )}
          >
            &lt;FormLabel>Anexar comprovação&lt;/FormLabel>
            &lt;FormMaker>{anexarComprovacaoMonitoramentoFormInputs}&lt;/FormMaker>
            &lt;Flex justifyContent="center" py={2}>
              &lt;Button
                colorScheme="brand1"
                variant="outline"
                type="submit"
                isDisabled={!anexarComprovacaoMonitoramentoForm.validation}
                isLoading={anexarComprovacaoMonitoramentoForm.isLoading}
              >
                Importar Comprovação
              &lt;/Button>
            &lt;/Flex>
          &lt;/Stack>
        &lt;/Flex>
        &lt;Table
          data={data}
          columns={columns}
          setRowsCount={setTableRowsCount}
          setSelectedRows={setSelectedTableRows}
        />
      &lt;/AnimatePresenceWrapper>

      {/* Filtro Avançado Overlay */}
      &lt;Overlay
        closeOnOverlayClick={true}
        isOpen={filtroAvancadoForm.overlayIsOpen}
        onClose={filtroAvancadoForm.closeOverlay}
        header="Filtro Avançado"
        closeButton
      >
        &lt;Heading size="md" mb={4}>
          Selecionar filtros:
        &lt;/Heading>
        &lt;Stack
          as={chakra.form}
          onSubmit={filtroAvancadoForm.handleSubmit(filtroAvancadoFormSubmit)}
        >
          &lt;SelectInputBox
            id="escritoriosRegionais"
            label="Escritórios Regionais"
            formControl={filtroAvancadoForm.control}
            options={escritoriosFromBd}
            isMulti
            required={false}
          />
          &lt;SelectInputBox
            id="municipios"
            label="Municípios"
            formControl={filtroAvancadoForm.control}
            options={municipiosFromBd}
            isMulti
            required={false}
          />
          &lt;SelectInputBox
            id="demandantes"
            label="Demandantes"
            formControl={filtroAvancadoForm.control}
            options={demandantesFromBd}
            isMulti
            required={false}
          />
          &lt;SelectInputBox
            id="unidadesLotacao"
            label="Unidades de Lotação"
            formControl={filtroAvancadoForm.control}
            options={situacoesFromBd}
            isMulti
            required={false}
          />
          &lt;SelectInputBox
            id="monitores"
            label="Monitores"
            formControl={filtroAvancadoForm.control}
            options={formacoesFromBd}
            isMulti
            required={false}
          />
          &lt;HStack justifyContent="flex-end" pt={4}>
            &lt;Button type="submit" colorScheme="brand1">
              Filtrar
            &lt;/Button>
          &lt;/HStack>
        &lt;/Stack>
      &lt;/Overlay>

      {/* Monitorar Beneficiário Overlay */}
      &lt;Overlay
        closeOnOverlayClick={true}
        isOpen={monitorarBeneficiarioForm.overlayIsOpen}
        onClose={monitorarBeneficiarioForm.closeOverlay}
        header={
          _.isEmpty(monitoramentoSelecionado)
            ? `Monitorar Beneficiári${
                selectedRow.sexo === "Feminino" ? "a" : "o"
              }: ${selectedRow.nome}`
            : `Editar Monitoramento - ${selectedRow.nome}`
        }
        closeButton
        onCloseComplete={() => {
          setSelectedRow({});
          setMonitoramentoSelecionado({});
        }}
        size="lg"
      >
        &lt;Heading size="md" pb={4}>
          Dados da Vaga
        &lt;/Heading>

        &lt;Stack
          as={chakra.form}
          onSubmit={monitorarBeneficiarioForm.handleSubmit(
            monitorarBeneficiarioFormSubmit
          )}
        >
          &lt;Stack bg="gray.200" p={4} rounded="lg">
            &lt;Heading as={Flex} flexDir="column" fontSize="sm" color="gray.500">
              Município da Vaga:
              &lt;chakra.span fontSize="md" color="gray.700">
                {!_.isEmpty(selectedRow) &amp;&amp; selectedRow.vaga.municipio.nome}
              &lt;/chakra.span>
            &lt;/Heading>
            &lt;Heading as={Flex} flexDir="column" fontSize="sm" color="gray.500">
              Demandante:
              &lt;chakra.span fontSize="md" color="gray.700">
                {`${
                  !_.isEmpty(selectedRow) &amp;&amp; selectedRow.vaga.demandante.sigla
                } - ${
                  !_.isEmpty(selectedRow) &amp;&amp; selectedRow.vaga.demandante.nome
                }`}
              &lt;/chakra.span>
            &lt;/Heading>
            &lt;Heading as={Flex} flexDir="column" fontSize="sm" color="gray.500">
              Unidade:
              &lt;chakra.span fontSize="md" color="gray.700">
                {!_.isEmpty(selectedRow) &amp;&amp;
                  selectedRow.vaga.unidadeLotacao.nome}
              &lt;/chakra.span>
            &lt;/Heading>
            &lt;Heading as={Flex} flexDir="column" fontSize="sm" color="gray.500">
              Formação:
              &lt;chakra.span fontSize="md" color="gray.700">
                {!_.isEmpty(selectedRow) &amp;&amp; selectedRow.formacao.nome}
              &lt;/chakra.span>
            &lt;/Heading>
          &lt;/Stack>
          &lt;Divider pt={4} />

          &lt;Heading size="md" pt={4}>
            Informações Gerais
          &lt;/Heading>
          &lt;FormMaker data={monitoramentoSelecionado}>
            {monitorarBeneficiarioFormInputsSection1}
          &lt;/FormMaker>
          &lt;Divider />
          &lt;Heading size="md" pt={4}>
            Impressões da Equipe PPE sobre
            {`${
              !_.isEmpty(selectedRow) &amp;&amp; selectedRow.sexo === "Feminino"
                ? " a Beneficiária"
                : " o Beneficiário"
            }`}
          &lt;/Heading>
          &lt;FormMaker data={monitoramentoSelecionado}>
            {monitorarBeneficiarioFormInputsSection2}
          &lt;/FormMaker>
          &lt;FormMaker data={monitoramentoSelecionado}>
            {monitorarBeneficiarioFormInputsSectionHidden}
          &lt;/FormMaker>
          &lt;HStack justifyContent="flex-end" py={4}>
            &lt;Button
              type="submit"
              colorScheme="brand1"
              isDisabled={!monitorarBeneficiarioForm.validation}
              isLoading={monitorarBeneficiarioForm.isLoading}
            >
              Salvar
            &lt;/Button>
          &lt;/HStack>
        &lt;/Stack>
      &lt;/Overlay>

      &lt;Modal
        isOpen={selecionarPeriodoForm.overlayIsOpen}
        onClose={selecionarPeriodoForm.closeOverlay}
        size="xl"
        closeOnOverlayClick={false}
      >
        &lt;ModalOverlay />
        &lt;ModalContent
          as={chakra.form}
          onSubmit={selecionarPeriodoForm.handleSubmit(
            selecionarPeriodoFormSubmit
          )}
        >
          &lt;ModalHeader>Selecionar período&lt;/ModalHeader>
          &lt;ModalCloseButton />
          &lt;ModalBody pb={6}>
            &lt;HStack w="100%" spacing={4} alignItems="flex-start">
              &lt;Box w="300px">
                &lt;SelectInputBox
                  id="anoPeriodo"
                  label="Ano"
                  formControl={selecionarPeriodoForm.control}
                  options={anoPeriodoMonitoramentoOptions}
                  onChange={(value) => {
                    selecionarPeriodoForm.control.control._fields.idPeriodo?._f.ref.setValue(
                      ""
                    );
                    setAnoPeriodoSelecionado(value);
                  }}
                  defaultValue={
                    !_.isEmpty(anoPeriodoSelecionado) &amp;&amp;
                    anoPeriodoMonitoramentoOptions.find(
                      ({ value }) => anoPeriodoSelecionado.value === value
                    )
                  }
                />
              &lt;/Box>
              &lt;Box w="full">
                &lt;SelectInputBox
                  id="idPeriodo"
                  label="Período"
                  formControl={selecionarPeriodoForm.control}
                  options={periodoMonitoramentoOptions}
                  defaultValue={
                    !_.isEmpty(periodoMonitoramentoOptions) &amp;&amp;
                    periodoMonitoramentoOptions.find(
                      ({ value }) => periodoSelecionado.trimestre.id === value
                    )
                  }
                />
              &lt;/Box>
            &lt;/HStack>
          &lt;/ModalBody>
          &lt;ModalFooter as={HStack}>
            &lt;Button
              colorScheme="brand1"
              variant="outline"
              onClick={selecionarPeriodoForm.closeOverlay}
            >
              Cancelar
            &lt;/Button>
            &lt;Button
              colorScheme="brand1"
              variant="solid"
              type="submit"
              // isDisabled={!selecionarPeriodoForm.validation}
              isLoading={selecionarPeriodoForm.isLoading}
            >
              Salvar
            &lt;/Button>
          &lt;/ModalFooter>
        &lt;/ModalContent>
      &lt;/Modal>
    &lt;/>
  );
}

export async function getServerSideProps(context) {
  const {
    params: { entity },
  } = context;
  const entities = ["ba", "to", "rj"];

  // const posts = await api.getContentList({
  //   referenceName: "posts",
  //   languageCode: "en-us"
  // });
  // const page = posts.items.find((post) => {
  //   return post.fields.slug === ctx.params.slug.join("/");
  // });

  const entityCheck = entities.find((ent) => ent === entity || undefined);
  const { data: timeFromNetwork } = await axios.get(
    //`/api/${entity}/network-time`
    getBackendRoute(entity, "ext/time-ntp")
  );

  return {
    props: {
      entity: entityCheck || null,
      timeFromNetwork,
    },
  };
}

Monitoramento.auth = true;
Monitoramento.dashboard = true;
</code></pre></article></section><footer class="footer" id="PeOAagUepe"><div class="wrapper">Made with ☕️ by <a href="https://github.com/frtechdev">FR Technologies</a></div></footer></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">FLEM PPE Frontend - Documentação</a><div class="mobile-nav-links"><div class="some-class navbar-item"><a id="some-id-mobile" href="https://frtechnologies.com.br" target="_blank">Website</a></div><div class="some-class navbar-item"><a id="some-id-mobile" href="https://github.com/frtechdev/flem-ppe-frontend/" target="_blank">Github</a></div></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="MpaAFMAiYRORNJnab3u9O"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-acoes.html">acoes</a></div><div class="sidebar-section-children"><a href="module-AnimatePresenceWrapper.html">AnimatePresenceWrapper</a></div><div class="sidebar-section-children"><a href="module-api.html">api</a></div><div class="sidebar-section-children"><a href="module-auth.html">auth</a></div><div class="sidebar-section-children"><a href="module-beneficiarios.html">beneficiarios</a></div><div class="sidebar-section-children"><a href="module-Breadcrumb.html">Breadcrumb</a></div><div class="sidebar-section-children"><a href="module-Buttons.html">Buttons</a></div><div class="sidebar-section-children"><a href="module-Cards.html">Cards</a></div><div class="sidebar-section-children"><a href="module-Charts.html">Charts</a></div><div class="sidebar-section-children"><a href="module-colaboradores-cr.html">colaboradores-cr</a></div><div class="sidebar-section-children"><a href="module-comunicados.html">comunicados</a></div><div class="sidebar-section-children"><a href="module-dashboard.html">dashboard</a></div><div class="sidebar-section-children"><a href="module-demandantes.html">demandantes</a></div><div class="sidebar-section-children"><a href="module-Dropzone.html">Dropzone</a></div><div class="sidebar-section-children"><a href="module-EmailEditor.html">EmailEditor</a></div><div class="sidebar-section-children"><a href="module-envio-oficios.html">envio-oficios</a></div><div class="sidebar-section-children"><a href="module-escritorios-regionais.html">escritorios-regionais</a></div><div class="sidebar-section-children"><a href="module-eventos.html">eventos</a></div><div class="sidebar-section-children"><a href="module-Form.html">Form</a></div><div class="sidebar-section-children"><a href="module-geral.html">geral</a></div><div class="sidebar-section-children"><a href="module-Icons.html">Icons</a></div><div class="sidebar-section-children"><a href="module-importar.html">importar</a></div><div class="sidebar-section-children"><a href="module-Inputs.html">Inputs</a></div><div class="sidebar-section-children"><a href="module-Inputs.html">Inputs</a></div><div class="sidebar-section-children"><a href="module-Layout.html">Layout</a></div><div class="sidebar-section-children"><a href="module-LDAPService.html">LDAPService</a></div><div class="sidebar-section-children"><a href="module-Logo.html">Logo</a></div><div class="sidebar-section-children"><a href="module-materiais.html">materiais</a></div><div class="sidebar-section-children"><a href="module-Menus.html">Menus</a></div><div class="sidebar-section-children"><a href="module-monitoramento.html">monitoramento</a></div><div class="sidebar-section-children"><a href="module-monitoramento.html">monitoramento</a></div><div class="sidebar-section-children"><a href="module-monitores.html">monitores</a></div><div class="sidebar-section-children"><a href="module-Navbar.html">Navbar</a></div><div class="sidebar-section-children"><a href="module-Overlay.html">Overlay</a></div><div class="sidebar-section-children"><a href="module-por-beneficiario.html">por-beneficiario</a></div><div class="sidebar-section-children"><a href="module-relatorios-monitoramentos.html">relatorios-monitoramentos</a></div><div class="sidebar-section-children"><a href="module-Sidebar.html">Sidebar</a></div><div class="sidebar-section-children"><a href="module-sintese.html">sintese</a></div><div class="sidebar-section-children"><a href="module-situacoes-vaga.html">situacoes-vaga</a></div><div class="sidebar-section-children"><a href="module-Table.html">Table</a></div><div class="sidebar-section-children"><a href="module-TagInput.html">TagInput</a></div><div class="sidebar-section-children"><a href="module-templates-oficios.html">templates-oficios</a></div><div class="sidebar-section-children"><a href="module-TextEditor.html">TextEditor</a></div><div class="sidebar-section-children"><a href="module-TextViewer.html">TextViewer</a></div><div class="sidebar-section-children"><a href="module-tipos-historico.html">tipos-historico</a></div><div class="sidebar-section-children"><a href="module-Toast.html">Toast</a></div><div class="sidebar-section-children"><a href="module-unidades-lotacao.html">unidades-lotacao</a></div><div class="sidebar-section-children"><a href="module-utils.html">utils</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="fUaN3yy2iestnezcsv-O8"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#allowCors">allowCors</a></div><div class="sidebar-section-children"><a href="global.html#authDb">authDb</a></div><div class="sidebar-section-children"><a href="global.html#authUserQa">authUserQa</a></div><div class="sidebar-section-children"><a href="global.html#Button">Button</a></div><div class="sidebar-section-children"><a href="global.html#GlobalStyle">GlobalStyle</a></div><div class="sidebar-section-children"><a href="global.html#MyApp">MyApp</a></div><div class="sidebar-section-children"><a href="global.html#normalizeString">normalizeString</a></div><div class="sidebar-section-children"><a href="global.html#toastData">toastData</a></div><div class="sidebar-section-children"><a href="global.html#variants">variants</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">function foo(){console.log("foo")}</script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>